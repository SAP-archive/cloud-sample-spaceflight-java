module.exports = Object.assign ( serve, {
    options: ['--to', '--at', '--with'],
    shortcuts: ['-2', '-a', '-w'],
    help: `
# SYNOPSIS

    *cds serve* <service> [ --at <endpoint> ] [ --with <impl> ]
    *cds serve* all

    Starts an http server which generically services the specified service(s).
    If used with _all_ for the services, it will look up according configuration
    from _package.json_ or _.cdsrc.json_ and serve each configured service.

`})

const cds = require('../lib')
function serve (models, options={}) {
    if (cds.config.data.driver)  cds.connect()
    const app = cds.serve (models, options)
    return app.listen() .catch (console.error)
}
/* eslint no-console:off */